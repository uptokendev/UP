(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6601:function(){},8526:function(e,n,t){Promise.resolve().then(t.bind(t,5731))},5731:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return P}});var a=t(7437),i=t(2265),o=t(4968),r=t(5950),s=t(2948);t(2060);var c=t(4298),l=t(1867),d=t(9556);function u(e){let{children:n}=e,t=(0,i.useMemo)(()=>[new c.O,new l.e,new d.x],[]);return(0,a.jsx)(o.U,{endpoint:"https://api.devnet.solana.com",children:(0,a.jsx)(r.n,{wallets:t,autoConnect:!0,children:(0,a.jsx)(s.s,{children:n})})})}var h=t(2596),f=t(5408),m=t(4024),p=t(5135);async function g(){let e=new m.Connection("https://api.devnet.solana.com","confirmed"),n=window.solana;if(!n||!n.publicKey)throw Error("Connect a wallet first");let t=new p.Y7(e,n,{commitment:"confirmed"});p.fc(t);let a=await fetch("/idl/up_token.json");if(!a.ok)throw Error("IDL not found at /idl/up_token.json");let i=await a.json(),o=new m.PublicKey("2JZV7F2XYcyk4zqiExQ6Q5UMx6EbQbheP6sD6edAkq4k");return new p.$r(i,o,t)}var b=t(4344),w=t(2957).Buffer;let v=new m.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),y=Number("9"),x=(e,n)=>{var t;return(null!==(t=b.getAssociatedTokenAddressSync)&&void 0!==t?t:b.getAssociatedTokenAddress)(e,n,!0,v,b._u)},j=(e,n,t,a)=>{var i;return(null!==(i=b.createAssociatedTokenAccountIdempotentInstruction)&&void 0!==i?i:b.createAssociatedTokenAccountInstruction)(e,n,t,a,v,b._u)};function P(){var e;let n=(0,f.O)(),[t,o]=(0,i.useState)(null),[r,s]=(0,i.useState)(""),[c,l]=(0,i.useState)("0"),[d,b]=(0,i.useState)(""),[P,S]=(0,i.useState)(""),[k,E]=(0,i.useState)(""),[A,N]=(0,i.useState)(!1),I="https://api.devnet.solana.com",C=(0,i.useMemo)(()=>new m.PublicKey("HpzLoV9PoUAXcu423uBhUuGFJpMKoYjaLJtwrHqbxuY9"),[]),K=(0,i.useMemo)(()=>new m.PublicKey("9WuBZakPEy3bawgC9M22ioJzgHbBfe4Z8MPEvutVLqsR"),[]),T=(0,i.useMemo)(()=>new m.PublicKey("AKeDb9z8m3banwLpa47KHv4VaV39LEeW4J6SL1hsxq2W"),[]),B=(0,i.useMemo)(()=>new m.PublicKey("7Tcm73HQwfZGA8gYpYTHEYgHbfsEhMLYCY5SiecSpfBV"),[]),M=r&&(null===(e=n.publicKey)||void 0===e?void 0:e.toBase58())===r,L=function(e,n){let[t,a]=(0,i.useState)(Date.now());if((0,i.useEffect)(()=>{let e=setInterval(()=>a(Date.now()),1e3);return()=>clearInterval(e)},[]),!e||!n)return"—";let o=Math.max(0,Math.floor(((e+n)*1e3-t)/1e3));return"".concat(Math.floor(o/86400),"d ").concat(Math.floor(o%86400/3600),"h ").concat(Math.floor(o%3600/60),"m ").concat(o%60,"s")}((null==t?void 0:t.currentEpochStart)||0,(null==t?void 0:t.epochLength)||0);async function H(){try{let t=await g(),[a]=m.PublicKey.findProgramAddressSync([w.from("config")],t.programId),i=await t.account.globalConfig.fetch(a);if(o(i),s(i.authority.toBase58()),N(i.enforceHook),n.publicKey){var e;let t=new m.Connection(I,"confirmed"),a=x(C,n.publicKey),i=await t.getTokenAccountBalance(a).catch(()=>null);l((null==i?void 0:null===(e=i.value)||void 0===e?void 0:e.uiAmountString)||"0")}}catch(e){b(e.message||String(e))}}async function U(){try{b("Toggling enforcement...");let e=await g();await e.methods.setHookMode(!A).rpc(),N(!A),b("Done")}catch(e){b(e.message||String(e))}}async function Y(){try{if(!n.publicKey)throw Error("Connect wallet first");b("Preparing transfer...");let e=await g(),t=new m.Connection(I,"confirmed"),a=n.publicKey,i=new m.PublicKey(P),o=x(C,a),r=x(C,i),s=x(C,K),c=[];if(await t.getAccountInfo(o)||c.push(j(a,o,a,C)),await t.getAccountInfo(r)||c.push(j(a,r,i,C)),await t.getAccountInfo(s)||c.push(j(a,s,K,C)),c.length>0){let n=new m.Transaction().add(...c);await e.provider.sendAndConfirm(n,[])}let[l]=m.PublicKey.findProgramAddressSync([w.from("config")],e.programId),d=await e.account.globalConfig.fetch(l),u=BigInt(Math.floor(Number(d.currentEpochStart)/Number(d.epochLength))+1),h=w.alloc(8);h.writeBigUInt64LE(u);let[f]=m.PublicKey.findProgramAddressSync([w.from("epoch"),h],e.programId),S=function(e,n){let[t,a=""]=e.trim().split("."),i=(a+"0".repeat(n)).slice(0,n);return BigInt(t||"0")*10n**BigInt(n)+BigInt(i||"0")}(k,y);b("Sending...");let A=await e.methods.programTransfer(new p.BN(S.toString())).accounts({config:l,mint:C,fromToken:o,toToken:r,devToken:s,reflectionVault:T,holdPoolVault:B,tokenProgram:v,signer:a,systemProgram:m.SystemProgram.programId}).remainingAccounts([{pubkey:f,isWritable:!0,isSigner:!1}]).rpc();b("Transfer submitted: "+A),E(""),await H()}catch(e){b(e.message||String(e))}}return(0,i.useEffect)(()=>{H()},[n.publicKey]),(0,a.jsx)(u,{children:(0,a.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:20},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"$UP"})," Dashboard"]}),(0,a.jsx)(h.a,{className:"btn"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("b",{children:"Your $UP"}),(0,a.jsxs)("div",{children:["Balance: ",(0,a.jsx)("b",{children:c})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("b",{children:"Weekly Rewards"}),(0,a.jsxs)("div",{children:["Next epoch in: ",L]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("b",{children:"Send $UP (fees apply)"}),(0,a.jsx)("label",{children:"Recipient address"}),(0,a.jsx)("input",{value:P,onChange:e=>S(e.target.value),placeholder:"Enter Solana address"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col",children:[(0,a.jsx)("label",{children:"Amount (UI units)"}),(0,a.jsx)("input",{value:k,onChange:e=>E(e.target.value),placeholder:"e.g. 100.5"})]}),(0,a.jsx)("div",{className:"col",style:{display:"flex",alignItems:"flex-end"},children:(0,a.jsx)("button",{className:"btn",onClick:Y,children:"Send via Program"})})]}),(0,a.jsx)("div",{style:{opacity:.7,marginTop:8},children:"This routes through the $UP program so 1% burn, 1% reflection, 1% dev, 0.5% weekly pool are applied."})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("b",{children:"Hook Enforcement"}),(0,a.jsxs)("div",{children:["Status: ",(0,a.jsx)("b",{children:A?"ON":"OFF"})]}),M&&(0,a.jsx)("button",{className:"btn",onClick:U,children:A?"Disable":"Enable"}),(0,a.jsx)("div",{style:{opacity:.7,marginTop:8},children:"When ON, wallet “Send” is blocked; use this page or any integrated app to transfer."})]}),d&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("b",{children:"Status:"})," ",d]})]})})}}},function(e){e.O(0,[358,125,814,891,335,127,971,117,744],function(){return e(e.s=8526)}),_N_E=e.O()}]);